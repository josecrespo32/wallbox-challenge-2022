# Testing Image for wallbox-challenge-2022

For convenience, the usage commands are configured in a `Makefile`

```bash
$ make

Usage: make <command>

Commands:

  build-app:        Builds the Challenge App docker image.
  run-app:          Runs the Challenge App.

  build-tests:      Builds the Challenge App Tests docker image.
  run-tests:        Run the tests.
  run-tests-skip:   Run the @skip tests.
```

## Build and start  testing environment

Build and start the wallbox-challenge-2022 app docker image:

```bash
$ make build-app
...
Successfully tagged wallbox-challenge:latest

$ make run-app
...
> wallbox-challenge-2022@1.0.0 start
> node app.js
```

Build the testing docker image and run the tests:

```bash
$ make build-tests
...
Successfully tagged wallbox-challenge-tests:latest

$ make run-tests
...
14 features passed, 0 failed, 0 skipped
77 scenarios passed, 0 failed, 3 skipped
319 steps passed, 0 failed, 12 skipped, 0 undefined
Took 0m2.300s
```

Both App and testing logs can be found inside `logs` directory.

Generate the test plan.

```bash
$ make build-testplan
...
TestPlan successfully generated at testplans/Test_Plan_autogenerated_YYYYMMDD_HHMI.md
```

## Local development

Please include the following entry in your local `/etc/hosts`:

```
127.0.0.1   wallbox-challenge
```

Install the dependencies in a virtual environment:

```bash
(virtual env)$ pip install -r requirements.txt
```

You are ready to run the tests, for example:

```bash
(virtual env)$ behave -T --no-skipped --no-source --no-logcapture --no-capture features/00_app_is_up.feature
```
